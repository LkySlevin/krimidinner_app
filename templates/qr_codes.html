{% extends "base.html" %}

{% block title %}QR-Codes & Spieler-Links{% endblock %}

{% block content %}
<h1>üì± Spieler-Links & QR-Codes</h1>

<div class="info-box">
    <p><strong>‚ÑπÔ∏è Anleitung:</strong> Klicke auf einen Charakternamen, um den QR-Code und Link anzuzeigen.
    Die Spieler k√∂nnen den QR-Code scannen oder den Link √∂ffnen, um ihre Rolle und Phase-3-Informationen zu sehen.</p>
</div>

<h2>Spieler-Links</h2>

<style>
    .collapsible {
        background-color: #2a2a2a;
        color: #ffa07a;
        cursor: pointer;
        padding: 18px;
        width: 100%;
        border: none;
        text-align: left;
        outline: none;
        font-size: 18px;
        font-weight: bold;
        border-radius: 5px;
        margin-bottom: 5px;
        transition: background-color 0.3s;
    }

    .collapsible:hover {
        background-color: #3a3a3a;
    }

    .collapsible.active {
        background-color: #3a3a3a;
    }

    .collapsible::after {
        content: '\002B'; /* Plus symbol */
        color: #ffa07a;
        font-weight: bold;
        float: right;
        margin-left: 5px;
    }

    .collapsible.active::after {
        content: "\2212"; /* Minus symbol */
    }

    .content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out;
        background-color: #1a1a1a;
        border-radius: 0 0 5px 5px;
        margin-bottom: 15px;
    }

    .content-inner {
        padding: 20px;
        text-align: center;
    }

    .qr-container {
        background-color: white;
        padding: 20px;
        border-radius: 10px;
        display: inline-block;
        margin: 20px 0;
    }

    .player-url {
        word-break: break-all;
        background-color: #2a2a2a;
        padding: 10px;
        border-radius: 5px;
        margin-top: 15px;
    }

    .player-url a {
        color: #87CEEB;
        text-decoration: none;
    }

    .player-url a:hover {
        text-decoration: underline;
    }
</style>

{% for item in player_links %}
    <button class="collapsible">[{{ item.assigned_letter }}] {{ item.character.name }}</button>
    <div class="content">
        <div class="content-inner">
            {% if item.qr_url %}
                <div class="qr-container">
                    <img src="{{ item.qr_url }}" alt="QR-Code f√ºr {{ item.character.name }}" style="width: 256px; height: auto;">
                </div>
            {% else %}
                <p style="margin: 10px 0;">Kein QR-Code gefunden. Bitte im Admin-Panel neu generieren.</p>
            {% endif %}
            <div class="player-url">
                <strong>Link:</strong><br>
                <a href="{{ item.url }}" target="_blank">{{ item.url }}</a>
            </div>
        </div>
    </div>
{% endfor %}

<script>
    // Collapsible functionality
    var coll = document.getElementsByClassName("collapsible");
    for (var i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.maxHeight) {
                content.style.maxHeight = null;
            } else {
                content.style.maxHeight = content.scrollHeight + "px";
            }
        });
    }
</script>

<div style="margin-top: 30px; text-align: center;">
    <a href="{{ url_for('admin') }}" class="btn">‚öôÔ∏è Zur√ºck zum Admin-Panel</a>
    <a href="{{ url_for('index') }}" class="btn btn-secondary">üè† Zur Startseite</a>
</div>

{% endblock %}
